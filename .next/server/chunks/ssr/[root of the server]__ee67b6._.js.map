{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 127, "column": 0}, "map": {"version":3,"sources":["file:///Users/hasuwini/Documents/Frontend/MONGO-REDDIT/ed-frontend/lib/client.ts"],"sourcesContent":["import axios from 'axios'\n\nexport const client = axios.create({\n  baseURL: process.env.NEXT_PUBLIC_BASE_URL,\n  withCredentials: true,\n  headers: { 'Content-Type': 'application/json' },\n})\n\n// client.interceptors.response.use(\n//   (response) => {\n//     console.log('API Response:', response)\n//     return response\n//   },\n//   (error) => {\n//     console.error('API Error:', error)\n//     return Promise.reject(error)\n//   },\n// )\n"],"names":[],"mappings":";;;AAAA;;AAEO,MAAM,SAAS,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACjC,OAAO;IACP,iBAAiB;IACjB,SAAS;QAAE,gBAAgB;IAAmB;AAChD,GAEA,oCAAoC;CACpC,oBAAoB;CACpB,6CAA6C;CAC7C,sBAAsB;CACtB,OAAO;CACP,iBAAiB;CACjB,yCAAyC;CACzC,mCAAmC;CACnC,OAAO;CACP,IAAI"}},
    {"offset": {"line": 149, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":["file:///Users/hasuwini/Documents/Frontend/MONGO-REDDIT/ed-frontend/hooks/useAuthentification.tsx"],"sourcesContent":["// hooks/useAuthentication.ts\n'use client'\n\nimport { useState, useEffect } from 'react'\nimport { client } from 'lib/client'\nimport { useRouter } from 'next/navigation'\n\ninterface User {\n  id: string\n  username: string\n}\n\nexport function useAuthentication() {\n  const [user, setUser] = useState<User | null>(null)\n  const [isAuthenticated, setIsAuthenticated] = useState(false)\n  const [isLoading, setIsLoading] = useState(true)\n  const router = useRouter()\n\n  const checkAuth = async () => {\n    try {\n      const token = localStorage.getItem('token')\n      if (!token) {\n        setIsLoading(false)\n        return\n      }\n\n      client.defaults.headers.common['Authorization'] = `Bearer ${token}`\n      const response = await client.get('/auth/me')\n\n      if (response.data) {\n        setUser(response.data)\n        setIsAuthenticated(true)\n      }\n    } catch (error) {\n      console.error('Auth check error:', error)\n      localStorage.removeItem('token')\n      delete client.defaults.headers.common['Authorization']\n      setUser(null)\n      setIsAuthenticated(false)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    checkAuth()\n  }, [])\n\n  const login = async (token: string) => {\n    localStorage.setItem('token', token)\n    client.defaults.headers.common['Authorization'] = `Bearer ${token}`\n    await checkAuth()\n  }\n\n  const logout = async () => {\n    localStorage.removeItem('token')\n    delete client.defaults.headers.common['Authorization']\n    setUser(null)\n    setIsAuthenticated(false)\n    router.push('/auth/log-in')\n  }\n\n  return {\n    user,\n    isAuthenticated,\n    isLoading,\n    login,\n    logout,\n  }\n}\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;AAG7B;AACA;AACA;AAJA;;;;AAWO,SAAS;IACd,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,YAAY;QAChB,IAAI;YACF,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,CAAC,OAAO;gBACV,aAAa;gBACb;YACF;YAEA,6GAAA,CAAA,SAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;YACnE,MAAM,WAAW,MAAM,6GAAA,CAAA,SAAM,CAAC,GAAG,CAAC;YAElC,IAAI,SAAS,IAAI,EAAE;gBACjB,QAAQ,SAAS,IAAI;gBACrB,mBAAmB;YACrB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,qBAAqB;YACnC,aAAa,UAAU,CAAC;YACxB,OAAO,6GAAA,CAAA,SAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB;YACtD,QAAQ;YACR,mBAAmB;QACrB,SAAU;YACR,aAAa;QACf;IACF;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR;IACF,GAAG,EAAE;IAEL,MAAM,QAAQ,OAAO;QACnB,aAAa,OAAO,CAAC,SAAS;QAC9B,6GAAA,CAAA,SAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;QACnE,MAAM;IACR;IAEA,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,OAAO,6GAAA,CAAA,SAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB;QACtD,QAAQ;QACR,mBAAmB;QACnB,OAAO,IAAI,CAAC;IACd;IAEA,OAAO;QACL;QACA;QACA;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 217, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 223, "column": 0}, "map": {"version":3,"sources":["file:///Users/hasuwini/Documents/Frontend/MONGO-REDDIT/ed-frontend/components/header.tsx"],"sourcesContent":["'use client'\nimport Link from 'next/link'\nimport { useRouter } from 'next/navigation'\nimport { UserCircle } from 'lucide-react'\nimport { useAuthentication } from 'hooks/useAuthentification'\n\nexport const Header = () => {\n  const { isAuthenticated, user, logout } = useAuthentication()\n  const router = useRouter()\n\n  // Add debug log\n  console.log('Header render:', { isAuthenticated, user })\n\n  return (\n    <header className='flex h-16 w-full items-center justify-between gap-4 px-4 py-2 md:px-20'>\n      <Link href='/' className='text-2xl font-bold'>\n        reddit\n      </Link>\n\n      <div className='flex items-center gap-4'>\n        {isAuthenticated ? (\n          <>\n            <button\n              onClick={() => router.push('/create-post')}\n              className='button-primary'\n            >\n              Create Post\n            </button>\n\n            <div className='flex items-center gap-2'>\n              <div className='flex items-center gap-2'>\n                <UserCircle className='h-8 w-8' />\n                <span className='text-sm font-medium'>{user?.username}</span>\n              </div>\n\n              <button onClick={() => logout()} className='button-secondary'>\n                Log out\n              </button>\n            </div>\n          </>\n        ) : (\n          <Link href='/auth/log-in' className='button-primary'>\n            Log in\n          </Link>\n        )}\n      </div>\n    </header>\n  )\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AAEA;AADA;AAHA;;;;;;AAMO,MAAM,SAAS;IACpB,MAAM,EAAE,eAAe,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,6HAAA,CAAA,oBAAiB,AAAD;IAC1D,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,gBAAgB;IAChB,QAAQ,GAAG,CAAC,kBAAkB;QAAE;QAAiB;IAAK;IAEtD,qBACE,8OAAC;QAAO,WAAU;;0BAChB,8OAAC,4HAAA,CAAA,UAAI;gBAAC,MAAK;gBAAI,WAAU;0BAAqB;;;;;;0BAI9C,8OAAC;gBAAI,WAAU;0BACZ,gCACC;;sCACE,8OAAC;4BACC,SAAS,IAAM,OAAO,IAAI,CAAC;4BAC3B,WAAU;sCACX;;;;;;sCAID,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,kNAAA,CAAA,aAAU;4CAAC,WAAU;;;;;;sDACtB,8OAAC;4CAAK,WAAU;sDAAuB,MAAM;;;;;;;;;;;;8CAG/C,8OAAC;oCAAO,SAAS,IAAM;oCAAU,WAAU;8CAAmB;;;;;;;;;;;;;iDAMlE,8OAAC,4HAAA,CAAA,UAAI;oBAAC,MAAK;oBAAe,WAAU;8BAAiB;;;;;;;;;;;;;;;;;AAO/D"}},
    {"offset": {"line": 334, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 340, "column": 0}, "map": {"version":3,"sources":["file:///Users/hasuwini/Documents/Frontend/MONGO-REDDIT/ed-frontend/app/%28main%29/providers.tsx"],"sourcesContent":["'use client'\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query'\n\nconst queryClient = new QueryClient()\n\nexport function Providers({ children }: { children: React.ReactNode }) {\n  return (\n    <QueryClientProvider client={queryClient}>{children}</QueryClientProvider>\n  )\n}\n"],"names":[],"mappings":";;;;AACA;AAAA;AADA;;;AAGA,MAAM,cAAc,IAAI,6KAAA,CAAA,cAAW;AAE5B,SAAS,UAAU,EAAE,QAAQ,EAAiC;IACnE,qBACE,8OAAC,sLAAA,CAAA,sBAAmB;QAAC,QAAQ;kBAAc;;;;;;AAE/C"}},
    {"offset": {"line": 360, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 366, "column": 0}, "map": {"version":3,"sources":["file:///Users/hasuwini/Documents/Frontend/MONGO-REDDIT/ed-frontend/context/AuthContext.tsx"],"sourcesContent":["// hooks/useAuth.tsx or context/AuthContext.tsx\n'use client'\nimport {\n  createContext,\n  useContext,\n  useState,\n  useEffect,\n  ReactNode,\n} from 'react'\nimport { useRouter } from 'next/navigation'\nimport { client } from 'lib/client'\n\ninterface User {\n  id: string\n  username: string\n}\n\ninterface AuthContextType {\n  user: User | null\n  isAuthenticated: boolean\n  login: (token: string) => Promise<void>\n  logout: () => Promise<void>\n}\n\nexport const AuthContext = createContext<AuthContextType>({\n  user: null,\n  isAuthenticated: false,\n  login: async () => {},\n  logout: async () => {},\n})\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null)\n  const [isAuthenticated, setIsAuthenticated] = useState(false)\n  const [isLoading, setIsLoading] = useState(true)\n  const router = useRouter()\n\n  const checkAuth = async () => {\n    try {\n      const token = localStorage.getItem('token')\n      console.log('Checking token:', token) // Debug log\n\n      if (!token) {\n        setIsLoading(false)\n        return\n      }\n\n      client.defaults.headers.common['Authorization'] = `Bearer ${token}`\n\n      const response = await client.get('/auth/me')\n      console.log('Auth check response:', response.data) // Debug log\n\n      if (response.data) {\n        setUser(response.data)\n        setIsAuthenticated(true)\n      }\n    } catch (error) {\n      console.error('CheckAuth error:', error)\n      setUser(null)\n      setIsAuthenticated(false)\n      localStorage.removeItem('token')\n      delete client.defaults.headers.common['Authorization']\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const login = async (token: string) => {\n    try {\n      console.log('Login called with token:', token) // Debug log\n\n      // Store token\n      localStorage.setItem('token', token)\n\n      // Set auth header\n      client.defaults.headers.common['Authorization'] = `Bearer ${token}`\n\n      // Get user data\n      const response = await client.get('/auth/me')\n      console.log('Login user data:', response.data) // Debug log\n\n      setUser(response.data)\n      setIsAuthenticated(true)\n    } catch (error) {\n      console.error('Login error:', error)\n      localStorage.removeItem('token')\n      delete client.defaults.headers.common['Authorization']\n      throw error\n    }\n  }\n\n  const logout = async () => {\n    localStorage.removeItem('token')\n    delete client.defaults.headers.common['Authorization']\n    setUser(null)\n    setIsAuthenticated(false)\n    router.push('/auth/log-in')\n  }\n\n  useEffect(() => {\n    checkAuth()\n  }, [])\n\n  if (isLoading) {\n    return null // or a loading spinner\n  }\n\n  return (\n    <AuthContext.Provider value={{ user, isAuthenticated, login, logout }}>\n      {children}\n    </AuthContext.Provider>\n  )\n}\n\nexport const useAuth = () => useContext(AuthContext)\n"],"names":[],"mappings":"AAAA,+CAA+C;;;;;;;AAE/C;AAOA;AACA;AATA;;;;;AAuBO,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAAmB;IACxD,MAAM;IACN,iBAAiB;IACjB,OAAO,WAAa;IACpB,QAAQ,WAAa;AACvB;AAEO,SAAS,aAAa,EAAE,QAAQ,EAA2B;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,YAAY;QAChB,IAAI;YACF,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,QAAQ,GAAG,CAAC,mBAAmB,OAAO,YAAY;;YAElD,IAAI,CAAC,OAAO;gBACV,aAAa;gBACb;YACF;YAEA,6GAAA,CAAA,SAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;YAEnE,MAAM,WAAW,MAAM,6GAAA,CAAA,SAAM,CAAC,GAAG,CAAC;YAClC,QAAQ,GAAG,CAAC,wBAAwB,SAAS,IAAI,EAAE,YAAY;;YAE/D,IAAI,SAAS,IAAI,EAAE;gBACjB,QAAQ,SAAS,IAAI;gBACrB,mBAAmB;YACrB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,oBAAoB;YAClC,QAAQ;YACR,mBAAmB;YACnB,aAAa,UAAU,CAAC;YACxB,OAAO,6GAAA,CAAA,SAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB;QACxD,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,QAAQ,OAAO;QACnB,IAAI;YACF,QAAQ,GAAG,CAAC,4BAA4B,OAAO,YAAY;;YAE3D,cAAc;YACd,aAAa,OAAO,CAAC,SAAS;YAE9B,kBAAkB;YAClB,6GAAA,CAAA,SAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;YAEnE,gBAAgB;YAChB,MAAM,WAAW,MAAM,6GAAA,CAAA,SAAM,CAAC,GAAG,CAAC;YAClC,QAAQ,GAAG,CAAC,oBAAoB,SAAS,IAAI,EAAE,YAAY;;YAE3D,QAAQ,SAAS,IAAI;YACrB,mBAAmB;QACrB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,aAAa,UAAU,CAAC;YACxB,OAAO,6GAAA,CAAA,SAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB;YACtD,MAAM;QACR;IACF;IAEA,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,OAAO,6GAAA,CAAA,SAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB;QACtD,QAAQ;QACR,mBAAmB;QACnB,OAAO,IAAI,CAAC;IACd;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR;IACF,GAAG,EAAE;IAEL,IAAI,WAAW;QACb,OAAO,KAAK,uBAAuB;;IACrC;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAiB;YAAO;QAAO;kBACjE;;;;;;AAGP;AAEO,MAAM,UAAU,IAAM,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE"}},
    {"offset": {"line": 469, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}