{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/hasuwini/Documents/Frontend/MONGO-REDDIT/ed-frontend/lib/error-handling.ts"],"sourcesContent":["import { isAxiosError } from 'axios'\nimport { isRedirectError } from 'next/dist/client/components/redirect'\nimport { toast } from 'sonner'\n\n// lib/error-handling.ts\n\nexport type ServerActionResponse<T = any> =\n  | { data: T; error?: never } // Success case\n  | { data?: never; error: string } // Error case\n\nexport const handleServerActionError = <T>(\n  response: ServerActionResponse<T>,\n): T => {\n  if ('error' in response) {\n    throw new Error(response.error)\n  }\n  return response.data\n}\n\nexport const handleAxiosError = (error: unknown): ServerActionResponse => {\n  const defaultErrorMessage = 'something went wrong'\n\n  if (!isAxiosError(error)) {\n    console.error(error)\n    return { error: defaultErrorMessage }\n  }\n\n  return { error: error.response?.data.message || defaultErrorMessage }\n}\n\nexport const toastServerError = (error: Error) => {\n  if (!isRedirectError(error)) {\n    toast.error(error.message)\n  }\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAUO,MAAM,0BAA0B,CACrC;IAEA,IAAI,WAAW,UAAU;QACvB,MAAM,IAAI,MAAM,SAAS,KAAK;IAChC;IACA,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,mBAAmB,CAAC;IAC/B,MAAM,sBAAsB;IAE5B,IAAI,CAAC,CAAA,GAAA,iJAAA,CAAA,eAAY,AAAD,EAAE,QAAQ;QACxB,QAAQ,KAAK,CAAC;QACd,OAAO;YAAE,OAAO;QAAoB;IACtC;IAEA,OAAO;QAAE,OAAO,MAAM,QAAQ,EAAE,KAAK,WAAW;IAAoB;AACtE;AAEO,MAAM,mBAAmB,CAAC;IAC/B,IAAI,CAAC,CAAA,GAAA,mKAAA,CAAA,kBAAe,AAAD,EAAE,QAAQ;QAC3B,2IAAA,CAAA,QAAK,CAAC,KAAK,CAAC,MAAM,OAAO;IAC3B;AACF"}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["file:///Users/hasuwini/Documents/Frontend/MONGO-REDDIT/ed-frontend/app/posts/page.tsx"],"sourcesContent":["'use client'\n\nimport { useMutation } from '@tanstack/react-query'\nimport { getPost } from 'actions/getpost'\nimport { handleServerActionError } from 'lib/error-handling'\nimport { useParams } from 'next/navigation'\nimport { useEffect } from 'react'\n\ninterface Post {\n  _id: string\n  title: string\n  content: string\n  author: {\n    username: string\n  }\n  comments: Array<{\n    content: string\n    author: {\n      username: string\n    }\n  }>\n  createdAt: string\n}\n\nconst PostPage = () => {\n  const params = useParams()\n  const postId = params.id as string\n\n  const { mutate, data, isPending, error } = useMutation({\n    mutationFn: async () => {\n      console.log('Fetching post with ID:', postId) // Debug log\n      const result = await getPost(postId)\n      console.log('Server response:', result) // Debug log\n      return handleServerActionError(result)\n    },\n    onError: (error) => {\n      console.error('Error fetching post:', error) // Error log\n    },\n    onSuccess: (data) => {\n      console.log('Successfully fetched post:', data) // Success log\n    },\n  })\n\n  useEffect(() => {\n    console.log('Effect triggered with postId:', postId) // Debug log\n    mutate()\n  }, [mutate, postId])\n\n  if (isPending) {\n    console.log('Loading state...') // Debug log\n    return (\n      <div className='flex items-center justify-center p-4'>\n        <div className='text-lg'>Loading post...</div>\n      </div>\n    )\n  }\n\n  if (error) {\n    console.error('Render error:', error) // Error log\n    return (\n      <div className='flex items-center justify-center p-4'>\n        <div className='text-red-500'>\n          Error loading post:{' '}\n          {error instanceof Error ? error.message : 'Unknown error'}\n        </div>\n      </div>\n    )\n  }\n\n  const post = data as Post\n  if (!post) {\n    console.log('No post data found') // Debug log\n    return (\n      <div className='flex items-center justify-center p-4'>\n        <div className='text-lg'>Post not found</div>\n      </div>\n    )\n  }\n\n  console.log('Rendering post:', post) // Debug log\n\n  return (\n    <div className='mx-auto max-w-4xl p-4'>\n      <article>\n        <h1 className='text-3xl font-bold'>{post.title}</h1>\n        <div className='mt-2 text-gray-500'>\n          Posted by {post.author.username}\n        </div>\n        <div className='prose mt-6'>{post.content}</div>\n\n        {/* Comments section */}\n        <div className='mt-8'>\n          <h2 className='text-2xl font-bold'>Comments</h2>\n          <div className='mt-4 space-y-4'>\n            {post.comments.map((comment, index) => (\n              <div key={index} className='rounded border p-4'>\n                <p>{comment.content}</p>\n                <div className='mt-2 text-sm text-gray-500'>\n                  By {comment.author.username}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </article>\n    </div>\n  )\n}\n\nexport default PostPage\n"],"names":[],"mappings":";;;;;;;;;AAIA;AACA;AACA;AAJA;;;AAFA;;;;;;AAwBA,MAAM,WAAW;;IACf,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,SAAS,OAAO,EAAE;IAExB,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,iLAAA,CAAA,cAAW,AAAD,EAAE;QACrD,UAAU;oCAAE;gBACV,QAAQ,GAAG,CAAC,0BAA0B,QAAQ,YAAY;;gBAC1D,MAAM,SAAS,MAAM,QAAQ;gBAC7B,QAAQ,GAAG,CAAC,oBAAoB,QAAQ,YAAY;;gBACpD,OAAO,CAAA,GAAA,2HAAA,CAAA,0BAAuB,AAAD,EAAE;YACjC;;QACA,OAAO;oCAAE,CAAC;gBACR,QAAQ,KAAK,CAAC,wBAAwB,OAAO,YAAY;;YAC3D;;QACA,SAAS;oCAAE,CAAC;gBACV,QAAQ,GAAG,CAAC,8BAA8B,MAAM,cAAc;;YAChE;;IACF;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;8BAAE;YACR,QAAQ,GAAG,CAAC,iCAAiC,QAAQ,YAAY;;YACjE;QACF;6BAAG;QAAC;QAAQ;KAAO;IAEnB,IAAI,WAAW;QACb,QAAQ,GAAG,CAAC,oBAAoB,YAAY;;QAC5C,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;0BAAU;;;;;;;;;;;IAG/B;IAEA,IAAI,OAAO;QACT,QAAQ,KAAK,CAAC,iBAAiB,OAAO,YAAY;;QAClD,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;oBAAe;oBACR;oBACnB,iBAAiB,QAAQ,MAAM,OAAO,GAAG;;;;;;;;;;;;IAIlD;IAEA,MAAM,OAAO;IACb,IAAI,CAAC,MAAM;QACT,QAAQ,GAAG,CAAC,sBAAsB,YAAY;;QAC9C,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;0BAAU;;;;;;;;;;;IAG/B;IAEA,QAAQ,GAAG,CAAC,mBAAmB,MAAM,YAAY;;IAEjD,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;;8BACC,6LAAC;oBAAG,WAAU;8BAAsB,KAAK,KAAK;;;;;;8BAC9C,6LAAC;oBAAI,WAAU;;wBAAqB;wBACvB,KAAK,MAAM,CAAC,QAAQ;;;;;;;8BAEjC,6LAAC;oBAAI,WAAU;8BAAc,KAAK,OAAO;;;;;;8BAGzC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAAqB;;;;;;sCACnC,6LAAC;4BAAI,WAAU;sCACZ,KAAK,QAAQ,CAAC,GAAG,CAAC,CAAC,SAAS,sBAC3B,6LAAC;oCAAgB,WAAU;;sDACzB,6LAAC;sDAAG,QAAQ,OAAO;;;;;;sDACnB,6LAAC;4CAAI,WAAU;;gDAA6B;gDACtC,QAAQ,MAAM,CAAC,QAAQ;;;;;;;;mCAHrB;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYxB;GAnFM;;QACW,qIAAA,CAAA,YAAS;QAGmB,iLAAA,CAAA,cAAW;;;KAJlD;uCAqFS"}},
    {"offset": {"line": 287, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}