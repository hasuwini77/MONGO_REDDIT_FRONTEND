{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/hasuwini/Documents/Frontend/MONGO-REDDIT/ed-frontend/actions/get-posts.ts"],"sourcesContent":["'use server'\n\nimport { client } from 'lib/client'\nimport { ServerActionResponse } from 'lib/error-handling'\nimport { revalidateTag } from 'next/cache'\n\ninterface Post {\n  _id: string\n  title: string\n  content: string\n  author: {\n    username: string\n  }\n  comments: Array<{\n    content: string\n    author: {\n      username: string\n    }\n  }>\n  createdAt: string\n}\n\nexport const getPosts = async (): Promise<ServerActionResponse<Post[]>> => {\n  try {\n    const response = await client.get('/posts')\n    revalidateTag('posts')\n\n    return { data: response.data }\n  } catch (error: any) {\n    console.error(\n      'Server Action: Error:',\n      error.response?.data || error.message,\n    )\n    return {\n      error:\n        error.response?.data?.message ||\n        error.message ||\n        'Failed to fetch posts',\n    }\n  }\n}\n"],"names":[],"mappings":";;;;;IAsBa"}},
    {"offset": {"line": 13, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///Users/hasuwini/Documents/Frontend/MONGO-REDDIT/ed-frontend/lib/error-handling.ts"],"sourcesContent":["// lib/error-handling.ts\nimport { isAxiosError } from 'axios'\nimport { isRedirectError } from 'next/dist/client/components/redirect'\nimport { toast } from 'sonner'\n\nexport type ServerActionResponse<T = any> =\n  | { data: T; error?: never } // Success with data\n  | { token: string; user: T; error?: never } // Success with token and user\n  | { refreshToken: string; user: T; error?: never } // RefreshToken? with token and user\n  | { data?: never; error: string } // Error case\n\nexport const handleServerActionError = <T>(\n  response: ServerActionResponse<T>,\n): T => {\n  if ('error' in response) {\n    throw new Error(response.error)\n  }\n  if ('token' in response) {\n    return response.user\n  }\n  if ('refreshToken' in response) {\n    return response.user\n  }\n  return response.data\n}\n\n// Handle Axios errors\nexport const handleAxiosError = (\n  error: unknown,\n): ServerActionResponse<never> => {\n  const defaultErrorMessage = 'something went wrong'\n\n  if (!isAxiosError(error)) {\n    console.error(error)\n    return { error: defaultErrorMessage }\n  }\n\n  return { error: error.response?.data.message || defaultErrorMessage }\n}\n\n// Toast error messages\nexport const toastServerError = (error: Error) => {\n  if (!isRedirectError(error)) {\n    toast.error(error.message)\n  }\n}\n"],"names":[],"mappings":"AAAA,wBAAwB;;;;;;AAExB;AACA;AAFA;;;;AAUO,MAAM,0BAA0B,CACrC;IAEA,IAAI,WAAW,UAAU;QACvB,MAAM,IAAI,MAAM,SAAS,KAAK;IAChC;IACA,IAAI,WAAW,UAAU;QACvB,OAAO,SAAS,IAAI;IACtB;IACA,IAAI,kBAAkB,UAAU;QAC9B,OAAO,SAAS,IAAI;IACtB;IACA,OAAO,SAAS,IAAI;AACtB;AAGO,MAAM,mBAAmB,CAC9B;IAEA,MAAM,sBAAsB;IAE5B,IAAI,CAAC,CAAA,GAAA,iJAAA,CAAA,eAAY,AAAD,EAAE,QAAQ;QACxB,QAAQ,KAAK,CAAC;QACd,OAAO;YAAE,OAAO;QAAoB;IACtC;IAEA,OAAO;QAAE,OAAO,MAAM,QAAQ,EAAE,KAAK,WAAW;IAAoB;AACtE;AAGO,MAAM,mBAAmB,CAAC;IAC/B,IAAI,CAAC,CAAA,GAAA,mKAAA,CAAA,kBAAe,AAAD,EAAE,QAAQ;QAC3B,2IAAA,CAAA,QAAK,CAAC,KAAK,CAAC,MAAM,OAAO;IAC3B;AACF"}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///Users/hasuwini/Documents/Frontend/MONGO-REDDIT/ed-frontend/app/%28main%29/posts/page.tsx"],"sourcesContent":["'use client'\n\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { getPosts } from 'actions/get-posts'\nimport { client } from 'lib/client'\nimport { handleServerActionError } from 'lib/error-handling'\nimport Link from 'next/link'\nimport { Post } from 'types/types'\n\nconst AllPosts = () => {\n  const queryClient = useQueryClient()\n\n  // Use useQuery for fetching posts\n  const {\n    data: posts,\n    isLoading,\n    error,\n  } = useQuery({\n    queryKey: ['posts'],\n    queryFn: async () => {\n      const result = await getPosts()\n      return handleServerActionError(result) as Post[]\n    },\n  })\n\n  const voteMutation = useMutation({\n    mutationFn: async ({\n      postId,\n      voteType,\n    }: {\n      postId: string\n      voteType: 'up' | 'down'\n    }) => {\n      const voteTypeForBackend = voteType === 'up' ? 'upvote' : 'downvote'\n      const response = await client.post(`/posts/${postId}/vote`, {\n        voteType: voteTypeForBackend,\n      })\n      return response.data\n    },\n    onMutate: async ({ postId, voteType }) => {\n      // Cancel any outgoing refetches\n      await queryClient.cancelQueries({ queryKey: ['posts'] })\n\n      // Snapshot the previous value\n      const previousPosts = queryClient.getQueryData(['posts'])\n\n      // Optimistically update the posts\n      queryClient.setQueryData(['posts'], (old: Post[] | undefined) => {\n        if (!old) return old\n        return old.map((post) => {\n          if (post._id === postId) {\n            const isRemovingVote = post.userVote === voteType\n            return {\n              ...post,\n              upvotes:\n                post.upvotes +\n                (voteType === 'up'\n                  ? isRemovingVote\n                    ? -1\n                    : 1\n                  : post.userVote === 'up'\n                    ? -1\n                    : 0),\n              downvotes:\n                post.downvotes +\n                (voteType === 'down'\n                  ? isRemovingVote\n                    ? -1\n                    : 1\n                  : post.userVote === 'down'\n                    ? -1\n                    : 0),\n              userVote: isRemovingVote ? '' : voteType,\n            }\n          }\n          return post\n        })\n      })\n\n      return { previousPosts }\n    },\n    onError: (err, variables, context) => {\n      // If the mutation fails, roll back to the previous value\n      if (context?.previousPosts) {\n        queryClient.setQueryData(['posts'], context.previousPosts)\n      }\n    },\n    onSettled: () => {\n      // Refetch after error or success\n      queryClient.invalidateQueries({ queryKey: ['posts'] })\n    },\n  })\n\n  if (isLoading) {\n    return (\n      <div className='flex items-center justify-center p-4'>\n        <div className='text-lg'>Loading posts...</div>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className='flex items-center justify-center p-4'>\n        <div className='text-red-500'>\n          Error loading posts:{' '}\n          {error instanceof Error ? error.message : 'Unknown error'}\n        </div>\n      </div>\n    )\n  }\n\n  if (!posts || posts.length === 0) {\n    return (\n      <div className='flex items-center justify-center p-4'>\n        <div className='text-lg'>No posts found</div>\n      </div>\n    )\n  }\n\n  const sortedPosts = [...posts].sort((a, b) => {\n    const scoreA = a.upvotes - a.downvotes\n    const scoreB = b.upvotes - b.downvotes\n    if (scoreB !== scoreA) {\n      return scoreB - scoreA\n    }\n    return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n  })\n\n  return (\n    <div className='mx-auto max-w-7xl p-4'>\n      <h1 className='mb-8 text-center text-4xl font-bold text-blue-800'>\n        All Posts\n      </h1>\n      <div className='space-y-6'>\n        {sortedPosts.map((post) => (\n          <Link\n            href={`/posts/${post._id}`}\n            key={post._id}\n            className='block rounded-lg border border-gray-200 bg-white p-6 shadow-md transition-all duration-300 ease-in-out hover:shadow-[0_0_10px_5px_rgba(75,0,130,0.2),0_0_10px_10px_rgba(128,0,128,0.2)]'\n            onClick={(e) => {\n              if ((e.target as HTMLElement).closest('button')) {\n                e.preventDefault()\n              }\n            }}\n          >\n            <article>\n              <h2 className='text-2xl font-semibold text-gray-900'>\n                {post.title}\n              </h2>\n\n              <div className='mt-2 text-gray-700'>\n                {post.content.length > 150\n                  ? `${post.content.substring(0, 150)}...`\n                  : post.content}\n              </div>\n\n              <div className='mt-4 text-sm text-gray-600'>\n                Posted by{' '}\n                <span className='font-medium text-gray-800'>\n                  {post.author.username}\n                </span>{' '}\n                â€¢ {new Date(post.createdAt).toLocaleDateString()}\n              </div>\n\n              <div className='mt-2 flex items-center gap-4 text-sm text-gray-500'>\n                <div className='flex items-center gap-1'>\n                  {post.comments.length} comment\n                  {post.comments.length !== 1 ? 's' : ''}\n                </div>\n                <div className='flex items-center gap-1'>\n                  <button\n                    onClick={(e) => {\n                      e.preventDefault()\n                      e.stopPropagation()\n                      voteMutation.mutate({ postId: post._id, voteType: 'up' })\n                    }}\n                    className={`flex items-center ${\n                      post.userVote === 'up'\n                        ? 'text-orange-500'\n                        : 'text-gray-400'\n                    } hover:text-orange-500`}\n                  >\n                    <svg\n                      xmlns='http://www.w3.org/2000/svg'\n                      className='h-6 w-6'\n                      viewBox='0 0 24 24'\n                      fill='none'\n                      stroke='currentColor'\n                      strokeWidth='2'\n                      strokeLinecap='round'\n                      strokeLinejoin='round'\n                    >\n                      <path d='M12 3l8 8H4z' />\n                      <line x1='12' y1='3' x2='12' y2='17' />\n                    </svg>\n                  </button>\n                  <button\n                    onClick={(e) => {\n                      e.preventDefault()\n                      e.stopPropagation()\n                      voteMutation.mutate({\n                        postId: post._id,\n                        voteType: 'down',\n                      })\n                    }}\n                    className={`flex items-center ${\n                      post.userVote === 'down'\n                        ? 'text-blue-500'\n                        : 'text-gray-400'\n                    } hover:text-blue-500`}\n                  >\n                    <svg\n                      xmlns='http://www.w3.org/2000/svg'\n                      className='h-6 w-6'\n                      viewBox='0 0 24 24'\n                      fill='none'\n                      stroke='currentColor'\n                      strokeWidth='2'\n                      strokeLinecap='round'\n                      strokeLinejoin='round'\n                    >\n                      <path d='M12 21l-8-8h16z' />\n                      <line x1='12' y1='21' x2='12' y2='7' />\n                    </svg>\n                  </button>\n                  <span className='ml-2 min-w-[20px] text-center text-sm font-medium'>\n                    {post.upvotes - post.downvotes}\n                  </span>\n                </div>\n              </div>\n            </article>\n          </Link>\n        ))}\n      </div>\n    </div>\n  )\n}\n\nexport default AllPosts\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 470, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 480, "column": 0}, "map": {"version":3,"sources":["file:///Users/hasuwini/Documents/Frontend/MONGO-REDDIT/ed-frontend/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-client-wrapper.ts"],"sourcesContent":["// This file must be bundled in the app's client layer, it shouldn't be directly\n// imported by the server.\n\nexport { callServer } from 'next/dist/client/app-call-server'\nexport { findSourceMapURL } from 'next/dist/client/app-find-source-map-url'\n\n// A noop wrapper to let the Flight client create the server reference.\n// See also: https://github.com/facebook/react/pull/26632\n// Since we're using the Edge build of Flight client for SSR [1], here we need to\n// also use the same Edge build to create the reference. For the client bundle,\n// we use the default and let Webpack to resolve it to the correct version.\n// 1: https://github.com/vercel/next.js/blob/16eb80b0b0be13f04a6407943664b5efd8f3d7d0/packages/next/src/server/app-render/use-flight-response.tsx#L24-L26\nexport const createServerReference = (\n  (!!process.env.NEXT_RUNTIME\n    ? // eslint-disable-next-line import/no-extraneous-dependencies\n      require('react-server-dom-webpack/client.edge')\n    : // eslint-disable-next-line import/no-extraneous-dependencies\n      require('react-server-dom-webpack/client')) as typeof import('react-server-dom-webpack/client')\n).createServerReference\n"],"names":["callServer","createServerReference","findSourceMapURL","process","env","NEXT_RUNTIME","require"],"mappings":"AAAA,gFAAgF;AAChF,0BAA0B;AAYrBG,QAAQC,GAAG,CAACC,YAAY,GAEvBC,QAAQ,0CAERA,QAAQ;;;;;;;;;;;;;;;;;IAdLN,UAAU,EAAA;eAAVA,eAAAA,UAAU;;IASNC,qBAAqB,EAAA;eAArBA;;IARJC,gBAAgB,EAAA;eAAhBA,qBAAAA,gBAAgB;;;+BADE;qCACM;AAQ1B,MAAMD,wBACV,CAAA,CAAC,6MAI2C,EAC7CA,qBAAqB","ignoreList":[0]}},
    {"offset": {"line": 512, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 518, "column": 0}, "map": {"version":3,"sources":["file:///Users/hasuwini/Documents/Frontend/MONGO-REDDIT/ed-frontend/node_modules/axios/index.js"],"sourcesContent":["import axios from './lib/axios.js';\n\n// This module is intended to unwrap Axios default export as named.\n// Keep top-level export same with static properties\n// so that it can keep same with es module or cjs\nconst {\n  Axios,\n  AxiosError,\n  CanceledError,\n  isCancel,\n  CancelToken,\n  VERSION,\n  all,\n  Cancel,\n  isAxiosError,\n  spread,\n  toFormData,\n  AxiosHeaders,\n  HttpStatusCode,\n  formToJSON,\n  getAdapter,\n  mergeConfig\n} = axios;\n\nexport {\n  axios as default,\n  Axios,\n  AxiosError,\n  CanceledError,\n  isCancel,\n  CancelToken,\n  VERSION,\n  all,\n  Cancel,\n  isAxiosError,\n  spread,\n  toFormData,\n  AxiosHeaders,\n  HttpStatusCode,\n  formToJSON,\n  getAdapter,\n  mergeConfig\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;AAEA,mEAAmE;AACnE,oDAAoD;AACpD,iDAAiD;AACjD,MAAM,EACJ,KAAK,EACL,UAAU,EACV,aAAa,EACb,QAAQ,EACR,WAAW,EACX,OAAO,EACP,GAAG,EACH,MAAM,EACN,YAAY,EACZ,MAAM,EACN,UAAU,EACV,YAAY,EACZ,cAAc,EACd,UAAU,EACV,UAAU,EACV,WAAW,EACZ,GAAG,wIAAA,CAAA,UAAK","ignoreList":[0]}},
    {"offset": {"line": 543, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 549, "column": 0}, "map": {"version":3,"sources":["file:///Users/hasuwini/Documents/Frontend/MONGO-REDDIT/ed-frontend/node_modules/%40tanstack/query-core/src/mutationObserver.ts"],"sourcesContent":["import { getDefaultState } from './mutation'\nimport { notifyManager } from './notifyManager'\nimport { Subscribable } from './subscribable'\nimport { hashKey, shallowEqualObjects } from './utils'\nimport type { QueryClient } from './queryClient'\nimport type {\n  DefaultError,\n  MutateOptions,\n  MutationObserverOptions,\n  MutationObserverResult,\n} from './types'\nimport type { Action, Mutation } from './mutation'\n\n// TYPES\n\ntype MutationObserverListener<TData, TError, TVariables, TContext> = (\n  result: MutationObserverResult<TData, TError, TVariables, TContext>,\n) => void\n\n// CLASS\n\nexport class MutationObserver<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = void,\n  TContext = unknown,\n> extends Subscribable<\n  MutationObserverListener<TData, TError, TVariables, TContext>\n> {\n  options!: MutationObserverOptions<TData, TError, TVariables, TContext>\n\n  #client: QueryClient\n  #currentResult: MutationObserverResult<TData, TError, TVariables, TContext> =\n    undefined!\n  #currentMutation?: Mutation<TData, TError, TVariables, TContext>\n  #mutateOptions?: MutateOptions<TData, TError, TVariables, TContext>\n\n  constructor(\n    client: QueryClient,\n    options: MutationObserverOptions<TData, TError, TVariables, TContext>,\n  ) {\n    super()\n\n    this.#client = client\n    this.setOptions(options)\n    this.bindMethods()\n    this.#updateResult()\n  }\n\n  protected bindMethods(): void {\n    this.mutate = this.mutate.bind(this)\n    this.reset = this.reset.bind(this)\n  }\n\n  setOptions(\n    options: MutationObserverOptions<TData, TError, TVariables, TContext>,\n  ) {\n    const prevOptions = this.options as\n      | MutationObserverOptions<TData, TError, TVariables, TContext>\n      | undefined\n    this.options = this.#client.defaultMutationOptions(options)\n    if (!shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getMutationCache().notify({\n        type: 'observerOptionsUpdated',\n        mutation: this.#currentMutation,\n        observer: this,\n      })\n    }\n\n    if (\n      prevOptions?.mutationKey &&\n      this.options.mutationKey &&\n      hashKey(prevOptions.mutationKey) !== hashKey(this.options.mutationKey)\n    ) {\n      this.reset()\n    } else if (this.#currentMutation?.state.status === 'pending') {\n      this.#currentMutation.setOptions(this.options)\n    }\n  }\n\n  protected onUnsubscribe(): void {\n    if (!this.hasListeners()) {\n      this.#currentMutation?.removeObserver(this)\n    }\n  }\n\n  onMutationUpdate(action: Action<TData, TError, TVariables, TContext>): void {\n    this.#updateResult()\n\n    this.#notify(action)\n  }\n\n  getCurrentResult(): MutationObserverResult<\n    TData,\n    TError,\n    TVariables,\n    TContext\n  > {\n    return this.#currentResult\n  }\n\n  reset(): void {\n    // reset needs to remove the observer from the mutation because there is no way to \"get it back\"\n    // another mutate call will yield a new mutation!\n    this.#currentMutation?.removeObserver(this)\n    this.#currentMutation = undefined\n    this.#updateResult()\n    this.#notify()\n  }\n\n  mutate(\n    variables: TVariables,\n    options?: MutateOptions<TData, TError, TVariables, TContext>,\n  ): Promise<TData> {\n    this.#mutateOptions = options\n\n    this.#currentMutation?.removeObserver(this)\n\n    this.#currentMutation = this.#client\n      .getMutationCache()\n      .build(this.#client, this.options)\n\n    this.#currentMutation.addObserver(this)\n\n    return this.#currentMutation.execute(variables)\n  }\n\n  #updateResult(): void {\n    const state =\n      this.#currentMutation?.state ??\n      getDefaultState<TData, TError, TVariables, TContext>()\n\n    this.#currentResult = {\n      ...state,\n      isPending: state.status === 'pending',\n      isSuccess: state.status === 'success',\n      isError: state.status === 'error',\n      isIdle: state.status === 'idle',\n      mutate: this.mutate,\n      reset: this.reset,\n    } as MutationObserverResult<TData, TError, TVariables, TContext>\n  }\n\n  #notify(action?: Action<TData, TError, TVariables, TContext>): void {\n    notifyManager.batch(() => {\n      // First trigger the mutate callbacks\n      if (this.#mutateOptions && this.hasListeners()) {\n        const variables = this.#currentResult.variables!\n        const context = this.#currentResult.context\n\n        if (action?.type === 'success') {\n          this.#mutateOptions.onSuccess?.(action.data, variables, context!)\n          this.#mutateOptions.onSettled?.(action.data, null, variables, context)\n        } else if (action?.type === 'error') {\n          this.#mutateOptions.onError?.(action.error, variables, context)\n          this.#mutateOptions.onSettled?.(\n            undefined,\n            action.error,\n            variables,\n            context,\n          )\n        }\n      }\n\n      // Then trigger the listeners\n      this.listeners.forEach((listener) => {\n        listener(this.#currentResult)\n      })\n    })\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 651, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 657, "column": 0}, "map": {"version":3,"sources":["file:///Users/hasuwini/Documents/Frontend/MONGO-REDDIT/ed-frontend/node_modules/%40tanstack/react-query/src/utils.ts"],"sourcesContent":["export function shouldThrowError<T extends (...args: Array<any>) => boolean>(\n  throwError: boolean | T | undefined,\n  params: Parameters<T>,\n): boolean {\n  // Allow throwError function to override throwing behavior on a per-error basis\n  if (typeof throwError === 'function') {\n    return throwError(...params)\n  }\n\n  return !!throwError\n}\n\nexport function noop(): void {}\n"],"names":[],"mappings":";;;;;AAAO,SAAS,iBACd,UAAA,EACA,MAAA,EACS;IAET,IAAI,OAAO,eAAe,YAAY;QACpC,OAAO,WAAW,GAAG,MAAM;IAC7B;IAEA,OAAO,CAAC,CAAC;AACX;AAEO,SAAS,OAAa,CAAC","ignoreList":[0]}},
    {"offset": {"line": 671, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 677, "column": 0}, "map": {"version":3,"sources":["file:///Users/hasuwini/Documents/Frontend/MONGO-REDDIT/ed-frontend/node_modules/%40tanstack/react-query/src/useMutation.ts"],"sourcesContent":["'use client'\nimport * as React from 'react'\nimport { MutationObserver, notifyManager } from '@tanstack/query-core'\nimport { useQueryClient } from './QueryClientProvider'\nimport { noop, shouldThrowError } from './utils'\nimport type {\n  UseMutateFunction,\n  UseMutationOptions,\n  UseMutationResult,\n} from './types'\nimport type { DefaultError, QueryClient } from '@tanstack/query-core'\n\n// HOOK\n\nexport function useMutation<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = void,\n  TContext = unknown,\n>(\n  options: UseMutationOptions<TData, TError, TVariables, TContext>,\n  queryClient?: QueryClient,\n): UseMutationResult<TData, TError, TVariables, TContext> {\n  const client = useQueryClient(queryClient)\n\n  const [observer] = React.useState(\n    () =>\n      new MutationObserver<TData, TError, TVariables, TContext>(\n        client,\n        options,\n      ),\n  )\n\n  React.useEffect(() => {\n    observer.setOptions(options)\n  }, [observer, options])\n\n  const result = React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) =>\n        observer.subscribe(notifyManager.batchCalls(onStoreChange)),\n      [observer],\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult(),\n  )\n\n  const mutate = React.useCallback<\n    UseMutateFunction<TData, TError, TVariables, TContext>\n  >(\n    (variables, mutateOptions) => {\n      observer.mutate(variables, mutateOptions).catch(noop)\n    },\n    [observer],\n  )\n\n  if (\n    result.error &&\n    shouldThrowError(observer.options.throwOnError, [result.error])\n  ) {\n    throw result.error\n  }\n\n  return { ...result, mutate, mutateAsync: result.mutate }\n}\n"],"names":[],"mappings":";;;;AACA,YAAY,WAAW;AAEvB,SAAS,sBAAsB;;AAD/B,SAAS,kBAAkB,qBAAqB;AAEhD,SAAS,MAAM,wBAAwB;;;;;;AAUhC,SAAS,YAMd,OAAA,EACA,WAAA,EACwD;IACxD,MAAM,uMAAS,iBAAA,EAAe,WAAW;IAEzC,MAAM,CAAC,QAAQ,CAAA,GAAU,8JAAA,QAAA;gCACvB,IACE,0LAAI,mBAAA,CACF,QACA;;IAIA,8JAAA,SAAA;iCAAU,MAAM;YACpB,SAAS,UAAA,CAAW,OAAO;QAC7B;gCAAG;QAAC;QAAU,OAAO;KAAC;IAEtB,MAAM,SAAe,8JAAA,oBAAA,CACb,8JAAA,WAAA;oDACJ,CAAC,gBACC,SAAS,SAAA,oLAAU,gBAAA,CAAc,UAAA,CAAW,aAAa,CAAC;mDAC5D;QAAC,QAAQ;KAAA;oDAEX,IAAM,SAAS,gBAAA,CAAiB;;oDAChC,IAAM,SAAS,gBAAA,CAAiB;;IAGlC,MAAM,SAAe,8JAAA,WAAA;2CAGnB,CAAC,WAAW,kBAAkB;YAC5B,SAAS,MAAA,CAAO,WAAW,aAAa,EAAE,KAAA,4KAAM,QAAI;QACtD;0CACA;QAAC,QAAQ;KAAA;IAGX,IACE,OAAO,KAAA,oLACP,mBAAA,EAAiB,SAAS,OAAA,CAAQ,YAAA,EAAc;QAAC,OAAO,KAAK;KAAC,GAC9D;QACA,MAAM,OAAO,KAAA;IACf;IAEA,OAAO;QAAE,GAAG,MAAA;QAAQ;QAAQ,aAAa,OAAO,MAAA;IAAO;AACzD","ignoreList":[0]}},
    {"offset": {"line": 733, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}